<template name="stats">

	<div class="divStats">

	  <!-- Nav tabs -->
	  <ul class="nav nav-tabs" role="tablist">
	    <li role="presentation" class="active"><a href="#me" aria-controls="me" role="tab" data-toggle="tab" id="me">ME</a></li>
	    <li role="presentation"><a href="#recent" aria-controls="recent" role="tab" data-toggle="tab">RECENT</a></li>
	    <li role="presentation"><a href="#alltime" aria-controls="alltime" role="tab" data-toggle="tab" id="alltime">ALL-TIME</a></li>
	  </ul>

	  <!-- Tab panes -->
	  <div class="tab-content">
	    <div role="tabpanel" class="tab-pane active" id="me"></div>
	    <div role="tabpanel" class="tab-pane" id="recent"></div>
	    <div role="tabpanel" class="tab-pane" id="alltime"></div>
	  </div>

	</div>

	<div class="divHomeContent">

		{{> Template.dynamic template=statsContent}}
	
	</div>

	<script> 

		$('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {

				display.stats.template.set( e.target.id );

			}
		);


	</script>
	
</template>


<template name="alltime">

	{{#if Template.subscriptionsReady}}

		<div class="divStatsTable"> 

			<h2 class="centered">HACKS</h2>

			<table class="dataTable" style="width: 40%;" border="4">

				  <tr>
				    <th class="statsColName statsColumn">NAME</th>
				    <th class="statsColData statsColumn">AVATAR</th> 
				    <th class="statsColData statsColumn">HACKS</th> 
				  </tr>

			  	  {{#each agent}}

					  <tr class="dataRow statsColumn">
					    
					    <td>{{this.username}}</td>

					    <td><img class="imgAvatar" src="{{this.profile.av}}" /> </td> 

					    <td>{{this.numberOfHacks}}</td>

					  </tr>

				  {{/each}}
			
			</table>	

		</div>
	{{/if}}

</template>


<template name="me">
	
	<div class="statsContainer whiteText">

		<h2><span class="yellowText">AGENT:</span> {{agentName}}</h2>

		<h2><span class="yellowText">START DATE:</span> {{userCreatedAt}}</h2>

		<h2><span class="yellowText">LIFETIME HACKS:</span> {{userHackCount}}</h2>

		<h2><span class="yellowText">UNIQUE COUNTRIES HACKED:</span> {{userCountryCount}}</h2>

		<h2><span class="yellowText">TOTAL MISSIONS COMPLETED:</span> {{userMissionCount}}</h2>

		<div class="divBadgeStats">

			{{#each statsBadge}}

				<div class="compositeStatsBadge" style="margin-bottom: 32px;" id="b1">

					<span class="label label-primary">{{this.count}}</span>

		            <img class="badgePic" src="{{this.pic}}" width="144">

		            <div class="badgeLabel whiteText">{{this.text}}</div> 

		        </div>

		    {{/each}}

		</div>

		<div style='clear:left; position: relative; top: 16px'>
			{{> atlas}}
		</div>

	</div>

</template>