<template name="browseWorldMap">

<script>
	function allowDrop(ev) {
	    ev.preventDefault();
	}

	function drag(ev) {

c("drag event")

//display.ctl["MAP"].browseWorldMap.map.areasSettings.autoZoom = false;

		gNoClick = true;

	    ev.dataTransfer.setData("text", ev.target.src);
	}

	function drop(ev) {

c("drop event")

	    ev.preventDefault();

	    var map = display.ctl["MAP"].browseWorldMap.map;

	    var _lat = map.stageXToLongitude( ev.offsetX )

	    var _long = map.stageYToLatitude( ev.offsetY )

		c("lat (north south) is " + _lat );

		c("long (east west) is " + _long );

		var data = ev.dataTransfer.getData("text");

		c("dropped " + data);

        var image = new AmCharts.MapImage();

        image.latitude = _lat;
        
        image.longitude = _long;

        image.width = 64;

        image.height = 64;
        
        image.imageURL = data;
        
        map.dataProvider.images.push(image);
        
        map.validateData();
	    
	}

</script>

	<div style="position: relative; float: left; top: 55px; width:10%;">

		<div id="browseWorldIcon">
			<img class="topMapIcon" src="all_icon.png">
		</div>

		<div id="browseContinentIcon" class="mapLevel" >
			<img class="mapIcon" id="mapIconContinent" src="{{continentIcon}}"> 
			<div class="areaLabel" id="continentLabel">{{continentName}}</div>
		</div>

		<div id="browseRegionIcon" class="mapLevel">
			<img class="mapIcon" id="mapIconRegion" src="{{regionIcon}}"> 
			<span class="areaLabel" id="regionLabel" style="top: {{labelYCorrection}}">{{regionName}}</span>
		</div>

	</div>


	<div id="browseDivMap"  ondrop="drop(event)" ondragover="allowDrop(event)" style="float: left; position: relative; top: 55px; width: {{mapWidth}}px; height: {{mapHeight}}px; border-radius: 7px; border: 4px solid; border-color: gray;">
	</div>  

	<div class="mapTags" style="position: relative; top: 55px; width:8%;">

		<div>
			<img class="imgMapTag"   draggable="true" ondragstart="drag(event)"  id="tag1" src="putin_tag.png">
		</div>

		<div>
			<img class="imgMapTag"   draggable="true" ondragstart="drag(event)" id="tag2" src="redsquare_tag.png">
		</div>

		<div>
			<img class="imgMapTag"  draggable="true" ondragstart="drag(event)" id="tag3" src="stbasils_tag.png">
		</div>

	</div>

	<div class="mapMessages" id="browseMapMessageBox"></div>

	<button class="btn btn-default mapCloseButton" id="browseMapClose">X</button>


</template>




 